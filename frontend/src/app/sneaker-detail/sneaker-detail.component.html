<div class="detail-container">
  <div class="content">
    @if (isLoading() && !sneaker()) {
      <div class="loading-state">
        <p>Loading sneaker details...</p>
      </div>
    } @else if (sneaker()) {
      <div class="detail-card">
        <div class="card-header">
          <button class="back-btn" (click)="goBack()">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 5L7 10L12 15" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Back to Inventory
          </button>
          <div class="header-actions">
            @if (!isEditing()) {
              <button class="edit-btn" (click)="toggleEdit()">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12.5 2.5L15.5 5.5L6 15H3V12L12.5 2.5Z" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Edit
              </button>
            } @else {
              <button class="cancel-btn" (click)="toggleEdit()">Cancel</button>
            }
          </div>
        </div>

        @if (!isEditing()) {
          <div class="view-mode">
            <div class="sneaker-header-info">
              <div class="brand-model">
                <h1>{{ sneaker()!.brand }}</h1>
                <h2>{{ sneaker()!.model }}</h2>
              </div>
              <div class="size-badge-large">
                <span class="label">Size</span>
                <span class="value">{{ sneaker()!.size }}</span>
              </div>
            </div>

            <div class="details-grid">
              <div class="detail-section">
                <h3>Product Information</h3>
                <div class="detail-rows">
                  <div class="detail-row">
                    <span class="label">SKU</span>
                    <span class="value sku">{{ sneaker()!.sku }}</span>
                  </div>
                  <div class="detail-row">
                    <span class="label">Brand</span>
                    <span class="value">{{ sneaker()!.brand }}</span>
                  </div>
                  <div class="detail-row">
                    <span class="label">Model</span>
                    <span class="value">{{ sneaker()!.model }}</span>
                  </div>
                  <div class="detail-row">
                    <span class="label">Size</span>
                    <span class="value">{{ sneaker()!.size }}</span>
                  </div>
                  @if (sneaker()!.color) {
                    <div class="detail-row">
                      <span class="label">Color</span>
                      <span class="value">{{ sneaker()!.color }}</span>
                    </div>
                  }
                </div>
              </div>

              @if (sneaker()!.purchase_price) {
                <div class="detail-section price-section">
                  <h3>Purchase Information</h3>
                  <div class="price-display">
                    <span class="currency">$</span>
                    <span class="amount">{{ sneaker()!.purchase_price }}</span>
                  </div>
                </div>
              }

              @if (sneaker()!.description) {
                <div class="detail-section full-width">
                  <h3>Description</h3>
                  <p class="description-text">{{ sneaker()!.description }}</p>
                </div>
              }

              <div class="detail-section metadata full-width">
                <h3>Metadata</h3>
                <div class="detail-rows">
                  <div class="detail-row">
                    <span class="label">Created</span>
                    <span class="value">{{ sneaker()!.created_at | date:'medium' }}</span>
                  </div>
                  @if (sneaker()!.updated_at) {
                    <div class="detail-row">
                      <span class="label">Last Updated</span>
                      <span class="value">{{ sneaker()!.updated_at | date:'medium' }}</span>
                    </div>
                  }
                </div>
              </div>
            </div>
          </div>
        } @else {
          <div class="edit-mode">
            <h2>Edit Sneaker</h2>
            <form [formGroup]="editForm" (ngSubmit)="onSubmit()">
              <div class="form-grid">
                <div class="form-group">
                  <label for="sku">SKU</label>
                  <input 
                    id="sku" 
                    type="text" 
                    formControlName="sku" 
                    placeholder="Enter SKU"
                  >
                </div>
                
                <div class="form-group">
                  <label for="brand">Brand</label>
                  <input 
                    id="brand" 
                    type="text" 
                    formControlName="brand" 
                    placeholder="e.g., Nike, Adidas"
                  >
                </div>

                <div class="form-group">
                  <label for="model">Model</label>
                  <input 
                    id="model" 
                    type="text" 
                    formControlName="model" 
                    placeholder="e.g., Air Jordan 1"
                  >
                </div>

                <div class="form-group">
                  <label for="size">Size</label>
                  <input 
                    id="size" 
                    type="number" 
                    formControlName="size" 
                    placeholder="US Size"
                  >
                </div>

                <div class="form-group">
                  <label for="color">Color</label>
                  <input 
                    id="color" 
                    type="text" 
                    formControlName="color" 
                    placeholder="Optional"
                  >
                </div>

                <div class="form-group">
                  <label for="purchase_price">Purchase Price</label>
                  <input 
                    id="purchase_price" 
                    type="number" 
                    formControlName="purchase_price" 
                    placeholder="Optional"
                  >
                </div>

                <div class="form-group full-width">
                  <label for="description">Description</label>
                  <textarea 
                    id="description" 
                    formControlName="description" 
                    placeholder="Optional - Add any additional details"
                  ></textarea>
                </div>
              </div>

              <div class="form-actions">
                <button 
                  type="submit" 
                  [disabled]="editForm.invalid || isLoading()" 
                  class="save-btn"
                >
                  @if (!isLoading()) {
                    <span>Save Changes</span>
                  }
                  @if (isLoading()) {
                    <span>Saving...</span>
                  }
                </button>
              </div>
            </form>
          </div>
        }
      </div>
    }
  </div>
</div>
